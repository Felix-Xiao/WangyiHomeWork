<!DOCTYPE>
<html lang="ZH-cn">

<head>
    <meta charset="utf-8">
    <title>标题</title>
    <meta name="keywords" content="关键字" />
    <meta name="description" content="网页描述" />
</head>
<style>
    * {
        margin: 0;
        padding: 0;
    }

    ul,
    ol {
        list-style: none;
    }

    .con {
        height: 300px;
        width: 100%;
        border: 1px solid black;
        display: flex;
        /* 换行 默认值nowarp 不换行*/
        /* 换行 第一行放下面 */
        /* flex: wrap-reverse; */
        flex-wrap: nowarp;
        line-height: 100px;
        /* 排列方向 */
        /* flex-direction: row-reverse; */
        /* 交叉轴对齐方式 X */
        /* align-items:flex-end; */
        /* 交叉轴对齐方式 Y */
        /* justify-content: flex-end; */

        /*多跟轴线对齐方式 一根轴线 */
        /* align-content: flex-start; */
    }

    .con>div {
        width: 100%;
        height: 100%;
        border: 1px solid black;
        size: 20;
        background: rgb(252, 251, 250);
        line-height: 300px;
        font-size: 50;
        color: black;
        text-align: center;
        align-content: center;
        transition: all .5s;
        /* margin: auto; */
    }
</style>

<body>
    <div>
        <div class="con">
            <div id="div1" class="prize" style="flex-grow: 1;order:1;">华为</div>
            <div id="div2" class="prize" style="flex-grow: 2;order:2;">iPhone X</div>
            <div id="div3" class="prize" style="flex-grow: 1;order:3;">谢谢惠顾</div>
        </div>
        <div class="con">
            <div id="div4" class="prize" style="flex-grow: 1;order:1;">手环</div>
            <div id="div5" class="startBtn" style="flex-grow: 2;order:2;" onclick="start()">开始</div>
            <div id="div6" class="prize" style="flex-grow: 1;order:3;">小熊抱枕</div>
        </div>
        <div class="con">
            <div id="div7" class="prize" style="flex-grow: 1;order:1;">格力冰箱</div>
            <div id="div8" class="prize" style="flex-grow: 2;order:2;">电风扇</div>
            <div id="div9" class="prize" style="flex-grow: 1;order:3;">小度音箱</div>
        </div>
    </div>
    <script>
        //https://www.cnblogs.com/CccK-html/p/11432740.html
        var prize = [
            { name: "华为", odds: 0.1 },
            { name: "iPhone X", odds: 0.1 },
            { name: "谢谢惠顾", odds: 0.3 },
            { name: "手环", odds: 0.1 },
            { name: "小熊抱枕", odds: 0.1 },
            { name: "格力冰箱", odds: 0.1 },
            { name: "电风扇", odds: 0.1 },
            { name: "小度音箱", odds: 0.1 }];
        var s = 0, stopTimer, count = 0, lastPrizeIndex = 0;
        window.onload = setPrize(prize);
        //根据传入数组，进行奖品设置
        function setPrize(prize) {
            var divList = document.getElementsByClassName("prize");
            for (let i = 0; i < 8; i++) {
                if (i <= prize.length) {
                    divList[i].innerHTML = prize[i].name;
                } else {
                    divList[i].innerHTML = "谢谢惠顾";
                }
            }
            document.getElementById("div5").innerHTML = "开始";
        }
        function start() {
            console.log('开始抽奖');
            count = 0;
            //根据奖品和对应的概率，计算中奖结果
            lastPrizeIndex = parseInt(random(prize));
            stopTimer = setInterval(function(){
                active();
                }, 300);
            // divPrize.style.background = "rgb(248, 211, 141)";
            // divPrize.style.WebkitTransform = "rotate(360deg) scale(1.3)";
            console.log(lastPrizeIndex);
            console.log(prize[lastPrizeIndex]);
        }

        function active() {
            var divList = document.getElementsByClassName("prize");
            var change = [0, 1, 2, 4, 7, 6, 5, 3];
            for (let i = 0; i < 8; i++) {
                divList[i].style.background = "white"
            }
            //转盘盘转到时，显示粉色
            divList[change[s]].style.background = "pink"

            count++;
            //抽奖中，快速转动
            if (count === 10 ) {
                clearInterval(stopTimer);
                stopTimer = setInterval(active, 100);
            }
            //抽奖即将结束，转动变慢
            if (count === 20) {
                clearInterval(stopTimer);
                stopTimer = setInterval(active, 300);
            }
            //轮转30次后，确定抽奖结果
            if (count > 30 && change[s] === lastPrizeIndex) {
                clearInterval(stopTimer);
            }
            s++;
            if (s === 8) {
                s = 0;
            }
        }

        //根据奖品和对应的概率，计算中奖结果（奖品概率占总概率的份额越多，越容易中奖，中奖概率可以大于1）
        function random(prize) {
            var total = 0;
            var currentTotal = 0;
            for (var i in prize) {
                total = total + prize[i].odds;
            }
            var random = Math.random();
            for (var i in prize) {
                currentTotal = currentTotal + prize[i].odds;
                if (currentTotal > random * total) {
                    return i;
                }
            }
        }

        // number 基于初始的大小 围绕中心点 XY
        // var scale = document.querySelector(".scale");
        var scale = document.getElementById("div5");
        scale.addEventListener("touchstart", () => {
            // scale.style.WebkitTransform = "scale(1.2, 2)";
            scale.style.WebkitTransform = "rotate(360deg) scale(1)";
        })



    </script>
</body>

</html>